<Project>
  <!-- Build Rules for all projects in the solution -->
  <PropertyGroup>
    <TargetFrameworks>netstandard2.0</TargetFrameworks>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <LangVersion>latest</LangVersion>
    <!--
    <TargetFramework>net47</TargetFramework>
    <TargetFramework>net471</TargetFramework>
    <TargetFramework>netcoreapp2.0</TargetFramework>
    <TargetFramework>netstandard2.0</TargetFramework>
  	<TargetFrameworks>netcoreapp2.0;net47</TargetFrameworks>
    <TargetFrameworks>netstandard2.0;net47</TargetFrameworks>
	-->
  </PropertyGroup>

  <!-- NuGet Package information for all assemblies in the solution -->
  <PropertyGroup>
    <Company>ATAP Technology, Inc.</Company>
    <Copyright>ATAP Technology, Inc.</Copyright>
    <Authors>William Hertzing</Authors>
    <Product>ATAP.Utilities</Product>
    <ProductName>ATAP.Utilities</ProductName>
    <RepositoryType>repositoryType</RepositoryType>
    <RepositoryUrl>https://github.com/BillHertzing/ATAP.Utilities</RepositoryUrl>
    <PackageLicenseUrl>https://opensource.org/licenses/MIT</PackageLicenseUrl>
    <PackageProjectUrl>www.project.url</PackageProjectUrl>
    <PackageIconUrl>www.icon.url</PackageIconUrl>
    <PackageTags>Testing, experimental, alpha, ATAP, ATAP.AceCommander</PackageTags>
    <PackageReleaseNotes>Initial implementation/test of ATAP.AceCommander Nuget packaging</PackageReleaseNotes>
  </PropertyGroup>

     
  <!-- NuGet Local Feed location, using an environment variable and fallback -->
  <PropertyGroup>
    <DropBoxBaseDir Condition=" '$(DropBoxBaseDir)' == '' "> C:\Dropbox\</DropBoxBaseDir>
    <NuGetLocalFeedPath Condition=" '$(NuGetLocalFeedPath)' == '' ">$(DropBoxBaseDir)NuGetLocalFeed</NuGetLocalFeedPath> 
  </PropertyGroup>

  <Target Name="StateBeforeCoreBuild" AfterTargets="BeforeCoreBuild">
    <Message Text="AssemblyName = $(AssemblyName)" />
    <Message Text="AssemblyName = $(AssemblyName)" />
    <Message Text="PackageVersion = $(PackageVersion)" />
	<Message Text="Configuration = $(Configuration)" />
    <Message Text="TargetFrameworks = $(TargetFrameworks)" />
    <Message Text="TargetFramework = $(TargetFramework)" />
    <Message Text="Platform = $(Platform)" />

  </Target>
  
  <Target Name="StateBeforeBuild" AfterTargets="BeforeBuild">
    <Message Text="AssemblyName = $(AssemblyName)" />
    <Message Text="UpdateAssemblyVersion = $(UpdateAssemblyVersion)" />
    <Message Text="UpdateAssemblyFileVersion = $(UpdateAssemblyFileVersion)" />
    <Message Text="UpdateAssemblyInfoVersion = $(UpdateAssemblyInfoVersion)" />
    <Message Text="UpdatePackageVersion = $(UpdatePackageVersion)" />
  </Target>
  <Target Name="StateAfterCopyFilesToOutputDirectory" AfterTargets="CopyFilesToOutputDirectory">
    <Message Text="UpdateAssemblyVersion = $(UpdateAssemblyVersion)" />
    <Message Text="UpdateAssemblyFileVersion = $(UpdateAssemblyFileVersion)" />
    <Message Text="UpdateAssemblyInfoVersion = $(UpdateAssemblyInfoVersion)" />
    <Message Text="UpdatePackageVersion = $(UpdatePackageVersion)" />
  </Target>
  <Target Name="StateBeforeGenerateNuspec" BeforeTargets="GenerateNuspec">
    <Message Text="UpdateAssemblyVersion = $(UpdateAssemblyVersion)" />
    <Message Text="UpdateAssemblyFileVersion = $(UpdateAssemblyFileVersion)" />
    <Message Text="UpdateAssemblyInfoVersion = $(UpdateAssemblyInfoVersion)" />
    <Message Text="UpdatePackageVersion = $(UpdatePackageVersion)" />
  </Target>
   <!-- NuGet Publish target package to local feed after successful package generation-->
  <Target Name="PublishAfterBuild" AfterTargets="GenerateNuspec">
    <Message Text="MSBuildToolsPath = $(MSBuildToolsPath)" />
    <Message Text="DropBoxBaseDir = $(DropBoxBaseDir)" />
    <Message Text="NuGetLocalFeedPath = $(NuGetLocalFeedPath)" />
    <Message Text="OutputPath = $(OutputPath)" />
    <Message Text="AssemblyName = $(AssemblyName)" />
    <Message Text="PackageVersion = $(PackageVersion)" />
    <Message Text="Configuration = $(Configuration)" />
    <Message Text="TargetFramework = $(TargetFramework)" />
    <Message Text="Platform = $(Platform)" />
    <Message Text="UpdateAssemblyVersion = $(UpdateAssemblyVersion)" />
    <Message Text="UpdateAssemblyFileVersion = $(UpdateAssemblyFileVersion)" />
    <Message Text="UpdateAssemblyInfoVersion = $(UpdateAssemblyInfoVersion)" />
    <Message Text="UpdatePackageVersion = $(UpdatePackageVersion)" />


    <Message Text="packagename = $(PackageId).$(PackageVersion).nupkg" />
    <Exec WorkingDirectory="$(OutputPath)" Command="NuGet.exe push &quot;$(PackageId).$(PackageVersion).nupkg&quot; -Source &quot;$(NuGetLocalFeedPath)&quot;" />
  </Target>

  <!-- solution-wide items to include in every project -->
  <PropertyGroup>
    <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\..\</SolutionDir>
  </PropertyGroup>

  <!-- solution-wide items to include in every project -->
  <ItemGroup>
  </ItemGroup>

  <!-- Release Configuration compilation symbols, flags and build options -->
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <PlatformTarget>AnyCPU</PlatformTarget>
    <DefineConstants>RELEASE;</DefineConstants>
  </PropertyGroup>

  <!-- Debug Configuration compilation symbols, flags and build options -->
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <PlatformTarget>AnyCPU</PlatformTarget>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <NoWarn>1701;1702;1705,NU1701</NoWarn>
  </PropertyGroup>

  <!-- .NET Standard 2.0 references, compilation flags and build options -->
  <PropertyGroup Condition=" '$(TargetFramework)' == 'netstandard2.0'">
    <DefineConstants>NETCORE;NETSTANDARD;NETSTANDARD2_0</DefineConstants>
  </PropertyGroup>

  <!-- .NET Standard 2.0 solution-wide items to include in every project -->
  <ItemGroup Condition=" '$(TargetFramework)' == 'netstandard2.0' ">
  </ItemGroup>

  <!-- .NET Core 2.0 references, compilation flags and build options -->
  <PropertyGroup Condition=" '$(TargetFramework)' == 'netcoreapp2.0'">
    <DefineConstants>NETCORE;</DefineConstants>
  </PropertyGroup>

  <!-- .NET Core 2.0 solution-wide items to include in every project -->
  <ItemGroup Condition=" '$(TargetFramework)' == 'netcoreapp2.0' ">
  </ItemGroup>

  <!-- .NET 47  references, compilation flags and build options -->
  <PropertyGroup Condition=" '$(TargetFramework)' == 'net47'">
    <DefineConstants>NET47;NETFULL</DefineConstants>
  </PropertyGroup>

  <!-- .NET 47 solution-wide items to include in every project -->
  <ItemGroup Condition=" '$(TargetFramework)' == 'net47' ">
  </ItemGroup>
  
  <!--
  <ItemGroup>
    <Analyzer Include="..\..\packages\xunit.analyzers.0.7.0\analyzers\dotnet\cs\xunit.analyzers.dll" />
  </ItemGroup>
  
  <Import Project="..\..\packages\xunit.core.2.3.1\build\xunit.core.targets" Condition="Exists('..\..\packages\xunit.core.2.3.1\build\xunit.core.targets')" />
  -->

</Project>
